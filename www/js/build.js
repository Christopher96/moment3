function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}function supports_json(){try{return"JSON"in window&&null!==window.JSON}catch(t){return!1}}function onDeviceReady(){window.addEventListener("batterystatus",onBatteryStatus,!1),StatusBar.show()}function onBatteryStatus(t){$("#battery").html("Level: "+t.level+" isPlugged: "+t.isPlugged)}function takePic(){navigator.camera.getPicture(function(t){changeImage({timestamp:(new Date).toDateString(),blob:t}),navigator.vibrate(1e3),popup("Din bild har sparats!")},function(){popup("Det gick inte att ta bilden...")},{quality:100,correctOrientation:!0})}function changeImage(t){var e=t.blob;addToStorage("mainImg",t),e.includes("file:///")||(e="data:image/jpeg;base64,"+e),$("#mainImg").attr("src",e),$("#mainImg").show(),$("#timestamp span").text(t.timestamp),$("#timestamp").show(),$("#noImg").hide(),$("#takeImg").hide(),$("#removeImg").show()}function removeImage(){removeFromStorage("mainImg"),$("#mainImg").hide(),$("#timestamp").hide(),$("#noImg").show(),$("#takeImg").show(),$("#removeImg").hide(),popup("Din bild har raderats!")}function popup(t){navigator.notification.alert(t,alertCallback,"Bildfunktion","Ok")}function addToStorage(t,e){var a=getStorage();a[t]=e,saveStorage(a)}function getStorage(){var t=localStorage.main,e={};return void 0!==t&&(e=window.JSON.parse(t)),e}function getFromStorage(t){return getStorage()[t]}function hasInStorage(t){return t in getStorage()}function removeFromStorage(t,e){if(hasInStorage(t)){var a=getStorage();delete a[t],saveStorage(a)}}function saveStorage(t){localStorage.main=window.JSON.stringify(t)}function alertCallback(){}$(document).ready(function(){document.addEventListener("deviceready",onDeviceReady,!1),supports_html5_storage()&&supports_json()?($("#removeImg").click(removeImage),$("#takeImg").click(takePic),hasInStorage("mainImg")&&changeImage(getFromStorage("mainImg"))):($("#takeImg").prop("disabled",!0),$("#mainImg").hide())});