{"version":3,"sources":["main.js"],"names":["$","document","ready","addEventListener","onDeviceReady","click","vibrate","alert","supports_html5_storage","supports_json","removeImage","takePic","hasInStorage","changeImage","getFromStorage","prop","hide","window","e","onBatteryStatus","console","log","device","cordova","navigator","globalization","StatusBar","show","status","html","level","isPlugged","camera","getPicture","imageData","quality","addToStorage","includes","attr","removeFromStorage","notification","alertCallback","id","data","storage","getStorage","saveStorage","current","localStorage","JSON","parse","dir","stringify"],"mappings":"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","file":"main.js","sourcesContent":["\n$(document).ready(function(){\n    document.addEventListener(\"deviceready\", onDeviceReady, false);\n  \n    $(\"#vibrate\").click(vibrate);\n    $(\"#alert\").click(alert);\n   \n    if(supports_html5_storage() && supports_json()){\n\n        $(\"#removeImg\").click(removeImage);\n        $(\"#takeImg\").click(takePic);\n\n        if(hasInStorage(\"mainImg\")){\n            changeImage(getFromStorage(\"mainImg\"));\n        } else {\n            removeImage();\n        }\n    } else {\n        $(\"#takeImg\").prop(\"disabled\", true);\n        $(\"#mainImg\").hide();\n    }\n\n    \n    \n});\n\nfunction supports_html5_storage() {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n}\nfunction supports_json() {\n  try {\n    return 'JSON' in window && window['JSON'] !== null;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction onDeviceReady() {\n    \n    window.addEventListener(\"batterystatus\", onBatteryStatus, false);\n    console.log(device.cordova);\n    console.log(navigator.globalization);\n    StatusBar.show();\n}\n\nfunction onBatteryStatus(status) {\n    $(\"#battery\").html(\"Level: \" + status.level + \" isPlugged: \" + status.isPlugged);\n}\n\nfunction takePic() {\n    navigator.camera.getPicture(\n    function(imageData) {\n        changeImage(imageData);\n        vibrate(1000);\n        alert();\n    }, function(){\n        console.log(\"fail\");\n    }, {\n        quality: 100\n    });\n}\n\nfunction changeImage(imageData){\n  addToStorage(\"mainImg\", imageData);\n  if(!(imageData).includes(\"file:///\")) {\n    imageData = \"data:image/jpeg;base64,\" + imageData;\n  }\n  $(\"#mainImg\").attr(\"src\", imageData);\n  $(\"#mainImg\").show();\n  $(\"#noImg\").hide();\n\n  $(\"#takeImg\").hide();\n  $(\"#removeImg\").show();\n}\n\nfunction removeImage(){\n    removeFromStorage(\"mainImg\");\n\n    $(\"#mainImg\").hide();\n    $(\"#noImg\").show();\n  \n    $(\"#takeImg\").show();\n    $(\"#removeImg\").hide();\n}\n\nfunction vibrate() {\n    navigator.vibrate(3000);\n}\n\nfunction alert() {\n    navigator.notification.alert(\n        'Your picture has been taken!',  // message\n        alertCallback,         // callback\n        'Alert',            // title\n        'OK!'                  // buttonName\n    );\n}\n//Adding to storage\nfunction addToStorage(id,data){\n    var storage = getStorage();\n    storage[id] = data;\n    saveStorage(storage);\n}\n\n//loading from storage\nfunction getStorage(){\n    var current = localStorage[\"main\"];\n    var storage = {};\n    if(typeof current != \"undefined\") storage=window.JSON.parse(current);\n    return storage;\n}\n\nfunction getFromStorage(id) {\n    var storage = getStorage();\n    return storage[id]\n}\n\n//Checking storage\nfunction hasInStorage(id){\n    return (id in getStorage());\n}\n\n//Adding to storage\nfunction removeFromStorage(id,data){\n    if (hasInStorage(id)) {\n        var storage = getStorage();\n        delete storage[id];\n        console.log('removed '+id);\n        saveStorage(storage);\n    }\n}\n\n//save storage\nfunction saveStorage(storage){\n    console.log(\"To store...\");\n    console.dir(storage);\n    localStorage[\"main\"] = window.JSON.stringify(storage);\n}\n\nfunction alertCallback() {\n    console.log(\"callback\");\n}\n"]}